<div class="container-fluid">
    <div class="primaryLayout">
        <div class="row bankHeader">
            <div class="col-12">
                <!-- <p>Add your bank account details</p> -->
                <h4>Add your bank account details</h4>
                <!-- <p>Cameron Williamson</p> -->
                <h2>Bank account should belong to</h2>
                <p>Cameron Williamson</p>

            </div>
        </div>
        <form action="" [formGroup]="infoDetailForm" class="form">
            <div class="row">
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="accountNumber">Account Number</label>
                        <input type="number" name="" id="Account Number"  placeholder="Account Number"  class="form-control"
                            formControlName="accountnumber" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('accountnumber')!.errors?.['required']}" />
                            <div *ngIf="submitted && infoDetailForm.controls['accountnumber']!.errors" class="invaliddiv">
                              <div *ngIf="infoDetailForm.controls['accountnumber']!.errors?.['required']"> Account Number is required
                              </div>
                            </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="reEnter">Re-enter Account Number</label>
                        <input type="number" name="" id="reEnter" placeholder="Re-enter Account Number"
                            class="form-control" formControlName="confirmaccountNo" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('confirmaccountNo')!.errors?.['required']}" />
                            <div *ngIf="submitted && infoDetailForm.controls['confirmaccountNo']!.errors" class="invaliddiv">
                              <div *ngIf="infoDetailForm.controls['confirmaccountNo']!.errors?.['required']">Re-enter Account Number is required
                              </div>
                            </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="swiftCode">Swift Code</label>
                        <input type="text" name="" id="swiftCode" placeholder="Swift Code" class="form-control" formControlName="swiftCode" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('swiftCode')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['swiftCode']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['swiftCode']!.errors?.['required']">Swift Code is required
                          </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="businessProfile">Business Profile Url</label>
                        <input type="text" name="" id="businessProfile" placeholder="Business Profile"
                            class="form-control" formControlName="businessProfileUrl" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('businessProfileUrl')!.errors?.['required']}" />
                            <div *ngIf="submitted && infoDetailForm.controls['businessProfileUrl']!.errors" class="invaliddiv">
                              <div *ngIf="infoDetailForm.controls['businessProfileUrl']!.errors?.['required']">Business Profile Url required
                              </div>
                            </div>
                    </div>
                </div>

                <!-- <div class="col-md-4">
                    <div class="inputField">
                        <label for="country">Country</label>
                        <input type="text" name="" id="country" placeholder="Country" class="form-control" formControlName="country" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('country')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['country']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['country']!.errors?.['required']">Country is required
                          </div>
                        </div>
                    </div>
                </div> -->


               


                <div class="col-md-4">
                    <div class="inputField">
                        <label for="firstName">First Name</label>
                        <input type="text" name="" id="firstName" placeholder="First Name" class="form-control" formControlName="firstName" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('firstName')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['firstName']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['firstName']!.errors?.['required']">First Name is required
                          </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-4">
                    <div class="inputField">
                        <label for="lastName">Last Name</label>
                        <input type="text" name="" id="lastName" placeholder="Last Name" class="form-control" formControlName="lastName" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('lastName')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['lastName']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['lastName']!.errors?.['required']">Last Name is required
                          </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="inputField">
                        <label for="dob">Date of Birth</label>
                        <input type="date" name="" id="dob" placeholder="Date of Birth" class="form-control" formControlName="dob" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('dob')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['dob']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['dob']!.errors?.['required']">Date of Birth is required
                          </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="inputField">
                        <label for="phone">Phone</label>
                        <input type="number" name="" id="phone" placeholder="Phone" class="form-control" formControlName="phone" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('phone')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['phone']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['phone']!.errors?.['required']">Phone is required
                          </div>
                          <div *ngIf="infoDetailForm.controls['phone']!.errors?.['pattern']">
                            Mobile number should be 10 digits
                          </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-4">
                    <div class="inputField">
                        <label for="address">Address 1</label>
                        <input type="text" name="" id="address1" placeholder="Address" class="form-control" formControlName="address1" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('address1')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['address1']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['address1']!.errors?.['required']">Address 1 is required
                          </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-4">
                    <div class="inputField">
                        <label for="address2">Address 2</label>
                        <input type="text" name="" id="address2" placeholder="Address" class="form-control" formControlName="address2" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('address2')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['address2']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['address2']!.errors?.['required']">Address 2 is required
                          </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-4">
                    <div class="inputField">
                        <label for="postalCode">Postal Code</label>
                        <input type="number" name="" id="postalCode" placeholder="Postal Code" class="form-control" formControlName="postalCode" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('postalCode')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['postalCode']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['postalCode']!.errors?.['required']">Postal Code is required
                          </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="country">Country</label>
                        <select class="form-control"  formControlName="country" (change)="onCountryChanged()" 
                        [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('country')!.errors?.['required']}" >
                            <option value="">Select a country</option>
                            <option *ngFor="let country of countries" [value]="country.code">{{ country.name }}</option>
                          </select>

                        <!-- <input type="text" name="" id="country" placeholder="Country" class="form-control" formControlName="country" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('country')!.errors?.['required']}" /> -->
                        <div *ngIf="submitted && infoDetailForm.controls['country']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['country']!.errors?.['required']">Country is required
                          </div>
                        </div>
                    </div>
                </div>

            
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="state">State</label>
                        <select class="form-control" formControlName="state" (change)="onStateChanged()">
                            <option value="">Select a state</option>
                            <option *ngFor="let state of filteredStates" [value]="state.code">{{ state.name }}</option>
                          </select>
                        <!-- <input type="text" name="" id="state" placeholder="State" class="form-control" formControlName="state" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('state')!.errors?.['required']}" /> -->
                        <div *ngIf="submitted && infoDetailForm.controls['state']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['state']!.errors?.['required']">State is required
                          </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="inputField">
                        <label for="postalCode">City</label>
                        <select class="form-control" formControlName="city">
                            <option value="">Select a city</option>
                            <option *ngFor="let city of filteredCities" [value]="city.code">{{ city.name }}</option>
                          </select>
                        <!-- <input type="text" name="" id="postalCode" placeholder="City" class="form-control" formControlName="city" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('city')!.errors?.['required']}" /> -->
                        <div *ngIf="submitted && infoDetailForm.controls['city']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['city']!.errors?.['required']">City is required
                          </div>
                        </div>
                    </div>
                </div>
              
                <div class="col-md-4">
                    <div class="inputField">
                        <label for="SSN Last 4">SSN Last 4</label>
                        <input type="text" name="" id="SSN-Last-4" placeholder="SSN Last 4" class="form-control" formControlName="SSN" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('SSN')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['SSN']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['SSN']!.errors?.['required']">SSN Last 4 is required
                          </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-4">
                    <div class="inputField">
                        <label for="email">Email</label>
                        <input type="email" name="" id="email" placeholder="Email" class="form-control" formControlName="email" [ngClass]="{ 'is-invalid': submitted && infoDetailForm.get('email')!.errors?.['required']}" />
                        <div *ngIf="submitted && infoDetailForm.controls['email']!.errors" class="invaliddiv">
                          <div *ngIf="infoDetailForm.controls['email']!.errors?.['required']">Email is required
                          </div>
                          <div *ngIf="infoDetailForm.controls['email']!.errors?.['email']">
                          Email must be a valid email address
                        </div>
                        </div>
                    </div>
                </div>


            </div>
        </form>
        <div class="row mt-3 p-2">


            <div class="col text-right">
                <div class="buttonsPairAllignment">
                    <button class="btn btn-main-outline" (click)="save()">Save</button>
                    <button class="btn btn-main" data-toggle="modal" data-target="#verifyOtp">
                        Add Card
                    </button>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Button trigger modal -->

<!-- Verify Model -->
<div class="modal fade" id="verifyOtp" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered bankPopup" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">
                    Add Credit or Debit Card
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form [formGroup]="cardForm">
            <div class="modal-body">
                <div class="row">
                    <div class="col">
                        <img src="../../.././../../assets/images/addCard.png" alt="" />
                    </div>
                </div>
                <div class="row">
                    <div class="row">

                        <div class="col-md-12">
                            <div class="inputField">
                                <label for="number">account_number</label>
                                <input type="text" name="" id="Number" placeholder="Number" class="form-control" formControlName="account_number" [ngClass]="{ 'is-invalid': submitted && cardForm.get('account_number')!.errors?.['required']}" />
                                <div *ngIf="submitted && cardForm.controls['account_number']!.errors" class="invaliddiv">
                                  <div *ngIf="cardForm.controls['account_number']!.errors?.['required']">Account Number is required
                                  </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="inputField">
                                <label for="number">Routing Number</label>
                                <input type="text" name="" id="routingNumber" placeholder="Routing Number"
                                    class="form-control" formControlName="routing_number" [ngClass]="{ 'is-invalid': submitted && cardForm.get('routing_number')!.errors?.['required']}" />
                                    <div *ngIf="submitted && cardForm.controls['routing_number']!.errors" class="invaliddiv">
                                      <div *ngIf="cardForm.controls['routing_number']!.errors?.['required']">Routing Number is required
                                      </div>
                                    </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <ngx-stripe-card [options]="cardOptions" [elementsOptions]="elementsOptions">
                            </ngx-stripe-card>
                        </div>
                        <!--  <div class="col-md-12">
                            <div class="inputField">
                                <label for="number">Number</label>
                                <input type="text" name="" id="Number" placeholder="Number" class="form-control" />
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="inputField">
                                <label for="exp_month">Exp Month</label>
                                <input type="text" name="" id="exp_month" placeholder="Exp Month"
                                    class="form-control" />
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="inputField">
                                <label for="exp_year">Exp Year</label>
                                <input type="text" name="" id="exp_year" placeholder="Exp Year" class="form-control" />
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="inputField">
                                <label for="currency">Currency</label>
                                <input type="text" name="" id="currency" placeholder="Currency" class="form-control" />
                            </div>
                        </div> -->

                    </div>
                    <div class="col-12 mt-2">
                        <button class="btn btn-main" data-toggle="modal" data-target="#accountadded"
                            data-dismiss="modal" (click)="addCard()">
                            Verify & Proceed
                        </button>
                    </div>
                </div>
            </div>
        </form>
        </div>
    </div>
</div>

<!-- Verify Model -->
<div class="modal fade" id="accountadded" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered bankPopup" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col">
                        <img src="../../.././../../assets/images/addCard.png" alt="" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <h4>Your card has been successfully added.</h4>
                    </div>
                    <div class="col-12">
                        <button class="btn btn-main" data-dismiss="modal">Continue</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>